<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>nuggets: Get Started</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">nuggets: Get Started</h1>



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>Package <code>nuggets</code> searches for patterns that can be
expressed as formulae in the form of elementary conjunctions, referred
to in this text as <em>conditions</em>. Conditions are constructed from
<em>predicates</em>, which correspond to data columns. The
interpretation of conditions depends on the choice of underlying
logic:</p>
<ul>
<li><p><em>Crisp (Boolean) logic</em>: each predicate takes values
<code>TRUE</code> (1) or <code>FALSE</code> (0). The truth value of a
condition is computed according to the rules of classical Boolean
algebra.</p></li>
<li><p><em>Fuzzy logic</em>: each predicate is assigned a <em>truth
degree</em> from the interval <span class="math inline">\([0,
1]\)</span>. The truth degree of a conjunction is then computed using a
chosen <em>triangular norm (t-norm)</em>. The package supports three
common t-norms, which are defined for predicates’ truth degrees <span class="math inline">\(a, b \in [0, 1]\)</span> as follows:</p>
<ul>
<li><em>Gödel</em> (minimum) t-norm: <span class="math inline">\(\min(a,
b)\)</span> ;</li>
<li><em>Goguen</em> (product) t-norm: <span class="math inline">\(a
\cdot b\)</span> ;</li>
<li><em>Łukasiewicz</em> t-norm: <span class="math inline">\(\max(0, a +
b - 1)\)</span></li>
</ul></li>
</ul>
<p>Before applying <code>nuggets</code>, data columns intended as
predicates must be prepared either by <em>dichotomization</em>
(conversion into <em>dummy variables</em>) or by transformation into
<em>fuzzy sets</em>. The package provides functions for both
transformations. See the <a href="data-preparation.html">Data
Preparation</a> vignette for a comprehensive guide, or the section <a href="#data-preparation">Data Preparation</a> below for a quick
overview.</p>
<p><code>nuggets</code> implements functions to search for pre-defined
types of patterns, for example:</p>
<ul>
<li><code>dig_associations()</code> for association rules,</li>
<li><code>dig_baseline_contrasts()</code>,
<code>dig_complement_contrasts()</code>, and
<code>dig_paired_baseline_contrasts()</code> for various contrast
patterns on numeric variables,</li>
<li><code>dig_correlations()</code> for conditional correlations.</li>
</ul>
<p>See <a href="#pre-defined-patterns">Pre-defined Patterns</a> below
for further details.</p>
<p>Discovered rules and patterns can be post-processed, visualized, and
explored interactively. Section <a href="#post-processing-and-visualization">Post-processing and
Visualization</a> describes these features.</p>
<p>Finally, the package allows users to provide custom evaluation
functions for conditions and to search for <em>user-defined</em> types
of patterns:</p>
<ul>
<li><code>dig()</code> is a general function for searching arbitrary
pattern types.</li>
<li><code>dig_grid()</code> is a wrapper around <code>dig()</code> for
patterns defined by conditions and a pair of columns evaluated by a
user-defined function.</li>
</ul>
<p>See <a href="#custom-patterns">Custom Patterns</a> for more
information.</p>
</div>
<div id="data-preparation" class="section level1">
<h1>Data Preparation</h1>
<p>Before applying <code>nuggets</code>, data columns intended as
predicates must be prepared either by <em>dichotomization</em>
(conversion into <em>dummy variables</em>) or by transformation into
<em>fuzzy sets</em>. The package provides the <code>partition()</code>
function for both transformations.</p>
<p>For a detailed guide to data preparation, including information about
all available functions and advanced techniques, please see the <a href="data-preparation.html">Data Preparation</a> vignette.</p>
<div id="crisp-boolean-predicates-example" class="section level2">
<h2>Crisp (Boolean) Predicates Example</h2>
<p>For crisp patterns, numeric columns are transformed to logical
(<code>TRUE</code>/<code>FALSE</code>) columns. Here’s a quick example
using the built-in <code>mtcars</code> dataset:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># Transform the whole dataset to crisp predicates</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="co"># First, convert cyl to a factor for illustration</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>crisp_mtcars <span class="ot">&lt;-</span> mtcars <span class="sc">|&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">cyl =</span> <span class="fu">factor</span>(cyl, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;four&quot;</span>, <span class="st">&quot;six&quot;</span>, <span class="st">&quot;eight&quot;</span>))) <span class="sc">|&gt;</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>    <span class="fu">partition</span>(cyl, vs<span class="sc">:</span>gear, <span class="at">.method =</span> <span class="st">&quot;dummy&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>    <span class="fu">partition</span>(mpg, <span class="at">.method =</span> <span class="st">&quot;crisp&quot;</span>, <span class="at">.breaks =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="cn">Inf</span>, <span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="cn">Inf</span>)) <span class="sc">|&gt;</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>    <span class="fu">partition</span>(disp<span class="sc">:</span>carb, <span class="at">.method =</span> <span class="st">&quot;crisp&quot;</span>, <span class="at">.breaks =</span> <span class="dv">3</span>) </span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="fu">head</span>(crisp_mtcars, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 32</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="co">#&gt;   `cyl=four` `cyl=six` `cyl=eight` `vs=0` `vs=1` `am=0` `am=1` `gear=3` `gear=4`</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="co">#&gt;   &lt;lgl&gt;      &lt;lgl&gt;     &lt;lgl&gt;       &lt;lgl&gt;  &lt;lgl&gt;  &lt;lgl&gt;  &lt;lgl&gt;  &lt;lgl&gt;    &lt;lgl&gt;   </span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="co">#&gt; 1 FALSE      TRUE      FALSE       TRUE   FALSE  FALSE  TRUE   FALSE    TRUE    </span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="co">#&gt; 2 FALSE      TRUE      FALSE       TRUE   FALSE  FALSE  TRUE   FALSE    TRUE    </span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="co">#&gt; 3 TRUE       FALSE     FALSE       FALSE  TRUE   FALSE  TRUE   FALSE    TRUE    </span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a><span class="co">#&gt;   `gear=5` `mpg=(-Inf;15]` `mpg=(15;20]` `mpg=(20;30]` `mpg=(30;Inf]`</span></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a><span class="co">#&gt;   &lt;lgl&gt;    &lt;lgl&gt;           &lt;lgl&gt;         &lt;lgl&gt;         &lt;lgl&gt;         </span></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a><span class="co">#&gt; 1 FALSE    FALSE           FALSE         TRUE          FALSE         </span></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a><span class="co">#&gt; 2 FALSE    FALSE           FALSE         TRUE          FALSE         </span></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a><span class="co">#&gt; 3 FALSE    FALSE           FALSE         TRUE          FALSE         </span></span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a><span class="co">#&gt;   `disp=(-Inf;205]` `disp=(205;338]` `disp=(338;Inf]` `hp=(-Inf;146]`</span></span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a><span class="co">#&gt;   &lt;lgl&gt;             &lt;lgl&gt;            &lt;lgl&gt;            &lt;lgl&gt;          </span></span>
<span id="cb1-23"><a href="#cb1-23" tabindex="-1"></a><span class="co">#&gt; 1 TRUE              FALSE            FALSE            TRUE           </span></span>
<span id="cb1-24"><a href="#cb1-24" tabindex="-1"></a><span class="co">#&gt; 2 TRUE              FALSE            FALSE            TRUE           </span></span>
<span id="cb1-25"><a href="#cb1-25" tabindex="-1"></a><span class="co">#&gt; 3 TRUE              FALSE            FALSE            TRUE           </span></span>
<span id="cb1-26"><a href="#cb1-26" tabindex="-1"></a><span class="co">#&gt;   `hp=(146;241]` `hp=(241;Inf]` `drat=(-Inf;3.48]` `drat=(3.48;4.21]`</span></span>
<span id="cb1-27"><a href="#cb1-27" tabindex="-1"></a><span class="co">#&gt;   &lt;lgl&gt;          &lt;lgl&gt;          &lt;lgl&gt;              &lt;lgl&gt;             </span></span>
<span id="cb1-28"><a href="#cb1-28" tabindex="-1"></a><span class="co">#&gt; 1 FALSE          FALSE          FALSE              TRUE              </span></span>
<span id="cb1-29"><a href="#cb1-29" tabindex="-1"></a><span class="co">#&gt; 2 FALSE          FALSE          FALSE              TRUE              </span></span>
<span id="cb1-30"><a href="#cb1-30" tabindex="-1"></a><span class="co">#&gt; 3 FALSE          FALSE          FALSE              TRUE              </span></span>
<span id="cb1-31"><a href="#cb1-31" tabindex="-1"></a><span class="co">#&gt;   `drat=(4.21;Inf]` `wt=(-Inf;2.82]` `wt=(2.82;4.12]` `wt=(4.12;Inf]`</span></span>
<span id="cb1-32"><a href="#cb1-32" tabindex="-1"></a><span class="co">#&gt;   &lt;lgl&gt;             &lt;lgl&gt;            &lt;lgl&gt;            &lt;lgl&gt;          </span></span>
<span id="cb1-33"><a href="#cb1-33" tabindex="-1"></a><span class="co">#&gt; 1 FALSE             TRUE             FALSE            FALSE          </span></span>
<span id="cb1-34"><a href="#cb1-34" tabindex="-1"></a><span class="co">#&gt; 2 FALSE             FALSE            TRUE             FALSE          </span></span>
<span id="cb1-35"><a href="#cb1-35" tabindex="-1"></a><span class="co">#&gt; 3 FALSE             TRUE             FALSE            FALSE          </span></span>
<span id="cb1-36"><a href="#cb1-36" tabindex="-1"></a><span class="co">#&gt;   `qsec=(-Inf;17.3]` `qsec=(17.3;20.1]` `qsec=(20.1;Inf]` `carb=(-Inf;3.33]`</span></span>
<span id="cb1-37"><a href="#cb1-37" tabindex="-1"></a><span class="co">#&gt;   &lt;lgl&gt;              &lt;lgl&gt;              &lt;lgl&gt;             &lt;lgl&gt;             </span></span>
<span id="cb1-38"><a href="#cb1-38" tabindex="-1"></a><span class="co">#&gt; 1 TRUE               FALSE              FALSE             FALSE             </span></span>
<span id="cb1-39"><a href="#cb1-39" tabindex="-1"></a><span class="co">#&gt; 2 TRUE               FALSE              FALSE             FALSE             </span></span>
<span id="cb1-40"><a href="#cb1-40" tabindex="-1"></a><span class="co">#&gt; 3 FALSE              TRUE               FALSE             TRUE              </span></span>
<span id="cb1-41"><a href="#cb1-41" tabindex="-1"></a><span class="co">#&gt;   `carb=(3.33;5.67]` `carb=(5.67;Inf]`</span></span>
<span id="cb1-42"><a href="#cb1-42" tabindex="-1"></a><span class="co">#&gt;   &lt;lgl&gt;              &lt;lgl&gt;            </span></span>
<span id="cb1-43"><a href="#cb1-43" tabindex="-1"></a><span class="co">#&gt; 1 TRUE               FALSE            </span></span>
<span id="cb1-44"><a href="#cb1-44" tabindex="-1"></a><span class="co">#&gt; 2 TRUE               FALSE            </span></span>
<span id="cb1-45"><a href="#cb1-45" tabindex="-1"></a><span class="co">#&gt; 3 FALSE              FALSE</span></span></code></pre></div>
<p>Now all columns are logical and can be used as predicates in crisp
conditions.</p>
</div>
<div id="fuzzy-predicates-example" class="section level2">
<h2>Fuzzy Predicates Example</h2>
<p>Fuzzy predicates express the degree to which a condition is
satisfied, with values in the interval <span class="math inline">\([0,1]\)</span>. This allows modeling of smooth
transitions between categories:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># Start with fresh mtcars and transform to fuzzy predicates</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>fuzzy_mtcars <span class="ot">&lt;-</span> mtcars <span class="sc">|&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">cyl =</span> <span class="fu">factor</span>(cyl, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;four&quot;</span>, <span class="st">&quot;six&quot;</span>, <span class="st">&quot;eight&quot;</span>))) <span class="sc">|&gt;</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>    <span class="fu">partition</span>(cyl, vs<span class="sc">:</span>gear, <span class="at">.method =</span> <span class="st">&quot;dummy&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>    <span class="fu">partition</span>(mpg, <span class="at">.method =</span> <span class="st">&quot;triangle&quot;</span>, <span class="at">.breaks =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="cn">Inf</span>, <span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="cn">Inf</span>)) <span class="sc">|&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>    <span class="fu">partition</span>(disp<span class="sc">:</span>carb, <span class="at">.method =</span> <span class="st">&quot;triangle&quot;</span>, <span class="at">.breaks =</span> <span class="dv">3</span>) </span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="fu">head</span>(fuzzy_mtcars, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 31</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="co">#&gt;   `cyl=four` `cyl=six` `cyl=eight` `vs=0` `vs=1` `am=0` `am=1` `gear=3` `gear=4`</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="co">#&gt;   &lt;lgl&gt;      &lt;lgl&gt;     &lt;lgl&gt;       &lt;lgl&gt;  &lt;lgl&gt;  &lt;lgl&gt;  &lt;lgl&gt;  &lt;lgl&gt;    &lt;lgl&gt;   </span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="co">#&gt; 1 FALSE      TRUE      FALSE       TRUE   FALSE  FALSE  TRUE   FALSE    TRUE    </span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="co">#&gt; 2 FALSE      TRUE      FALSE       TRUE   FALSE  FALSE  TRUE   FALSE    TRUE    </span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="co">#&gt; 3 TRUE       FALSE     FALSE       FALSE  TRUE   FALSE  TRUE   FALSE    TRUE    </span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="co">#&gt;   `gear=5` `mpg=(-Inf;15;20)` `mpg=(15;20;30)` `mpg=(20;30;Inf)`</span></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="co">#&gt;   &lt;lgl&gt;                 &lt;dbl&gt;            &lt;dbl&gt;             &lt;dbl&gt;</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="co">#&gt; 1 FALSE                     0             0.9               0.1 </span></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a><span class="co">#&gt; 2 FALSE                     0             0.9               0.1 </span></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="co">#&gt; 3 FALSE                     0             0.72              0.28</span></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a><span class="co">#&gt;   `disp=(-Inf;71.1;272)` `disp=(71.1;272;472)` `disp=(272;472;Inf)`</span></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="co">#&gt;                    &lt;dbl&gt;                 &lt;dbl&gt;                &lt;dbl&gt;</span></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a><span class="co">#&gt; 1                  0.557                 0.443                    0</span></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a><span class="co">#&gt; 2                  0.557                 0.443                    0</span></span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a><span class="co">#&gt; 3                  0.816                 0.184                    0</span></span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a><span class="co">#&gt;   `hp=(-Inf;52;194)` `hp=(52;194;335)` `hp=(194;335;Inf)`</span></span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a><span class="co">#&gt;                &lt;dbl&gt;             &lt;dbl&gt;              &lt;dbl&gt;</span></span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a><span class="co">#&gt; 1              0.592             0.408                  0</span></span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a><span class="co">#&gt; 2              0.592             0.408                  0</span></span>
<span id="cb2-29"><a href="#cb2-29" tabindex="-1"></a><span class="co">#&gt; 3              0.711             0.289                  0</span></span>
<span id="cb2-30"><a href="#cb2-30" tabindex="-1"></a><span class="co">#&gt;   `drat=(-Inf;2.76;3.84)` `drat=(2.76;3.84;4.93)` `drat=(3.84;4.93;Inf)`</span></span>
<span id="cb2-31"><a href="#cb2-31" tabindex="-1"></a><span class="co">#&gt;                     &lt;dbl&gt;                   &lt;dbl&gt;                  &lt;dbl&gt;</span></span>
<span id="cb2-32"><a href="#cb2-32" tabindex="-1"></a><span class="co">#&gt; 1                       0                   0.945                0.0550 </span></span>
<span id="cb2-33"><a href="#cb2-33" tabindex="-1"></a><span class="co">#&gt; 2                       0                   0.945                0.0550 </span></span>
<span id="cb2-34"><a href="#cb2-34" tabindex="-1"></a><span class="co">#&gt; 3                       0                   0.991                0.00917</span></span>
<span id="cb2-35"><a href="#cb2-35" tabindex="-1"></a><span class="co">#&gt;   `wt=(-Inf;1.51;3.47)` `wt=(1.51;3.47;5.42)` `wt=(3.47;5.42;Inf)`</span></span>
<span id="cb2-36"><a href="#cb2-36" tabindex="-1"></a><span class="co">#&gt;                   &lt;dbl&gt;                 &lt;dbl&gt;                &lt;dbl&gt;</span></span>
<span id="cb2-37"><a href="#cb2-37" tabindex="-1"></a><span class="co">#&gt; 1                 0.434                 0.566                    0</span></span>
<span id="cb2-38"><a href="#cb2-38" tabindex="-1"></a><span class="co">#&gt; 2                 0.304                 0.696                    0</span></span>
<span id="cb2-39"><a href="#cb2-39" tabindex="-1"></a><span class="co">#&gt; 3                 0.587                 0.413                    0</span></span>
<span id="cb2-40"><a href="#cb2-40" tabindex="-1"></a><span class="co">#&gt;   `qsec=(-Inf;14.5;18.7)` `qsec=(14.5;18.7;22.9)` `qsec=(18.7;22.9;Inf)`</span></span>
<span id="cb2-41"><a href="#cb2-41" tabindex="-1"></a><span class="co">#&gt;                     &lt;dbl&gt;                   &lt;dbl&gt;                  &lt;dbl&gt;</span></span>
<span id="cb2-42"><a href="#cb2-42" tabindex="-1"></a><span class="co">#&gt; 1                  0.533                    0.467                      0</span></span>
<span id="cb2-43"><a href="#cb2-43" tabindex="-1"></a><span class="co">#&gt; 2                  0.4                      0.6                        0</span></span>
<span id="cb2-44"><a href="#cb2-44" tabindex="-1"></a><span class="co">#&gt; 3                  0.0214                   0.979                      0</span></span>
<span id="cb2-45"><a href="#cb2-45" tabindex="-1"></a><span class="co">#&gt;   `carb=(-Inf;1;4.5)` `carb=(1;4.5;8)` `carb=(4.5;8;Inf)`</span></span>
<span id="cb2-46"><a href="#cb2-46" tabindex="-1"></a><span class="co">#&gt;                 &lt;dbl&gt;            &lt;dbl&gt;              &lt;dbl&gt;</span></span>
<span id="cb2-47"><a href="#cb2-47" tabindex="-1"></a><span class="co">#&gt; 1               0.143            0.857                  0</span></span>
<span id="cb2-48"><a href="#cb2-48" tabindex="-1"></a><span class="co">#&gt; 2               0.143            0.857                  0</span></span>
<span id="cb2-49"><a href="#cb2-49" tabindex="-1"></a><span class="co">#&gt; 3               1                0                      0</span></span></code></pre></div>
<p>Note that the <code>cyl</code>, <code>vs</code>, <code>am</code>, and
<code>gear</code> columns are still represented by dummy logical
columns, while the numeric columns are now represented by fuzzy sets.
This combination allows both crisp and fuzzy predicates to be used
together in pattern discovery.</p>
</div>
<div id="advanced-data-preparation-capabilities" class="section level2">
<h2>Advanced Data Preparation Capabilities</h2>
<p>The <code>nuggets</code> package provides powerful and flexible data
preparation tools. The <a href="data-preparation.html">Data
Preparation</a> vignette covers these capabilities in depth,
including:</p>
<ul>
<li><strong>Crisp (Boolean) partitioning</strong> with customizable
interval strategies:
<ul>
<li>Equal-width intervals for uniform discretization</li>
<li>Data-driven methods (quantile, k-means, hierarchical clustering,
etc.) for optimal breakpoints that respect the data structure</li>
<li>Custom breakpoints for domain-specific intervals</li>
</ul></li>
<li><strong>Fuzzy partitioning</strong> for modeling gradual transitions
and uncertainty:
<ul>
<li>Triangular membership functions for basic fuzzy sets</li>
<li>Raised-cosine membership functions for smoother transitions</li>
<li>Trapezoidal shapes using <code>.span</code> and <code>.inc</code>
parameters for overlapping fuzzy sets</li>
</ul></li>
<li><strong>Quality control utilities</strong> to improve pattern
mining:
<ul>
<li><code>is_almost_constant()</code> and
<code>remove_almost_constant()</code> to identify and filter
uninformative columns</li>
<li><code>dig_tautologies()</code> to find always-true rules that can be
used to prune search spaces</li>
</ul></li>
<li><strong>Custom labels</strong> for predicates to make discovered
patterns more interpretable</li>
</ul>
<p>For example, you can use quantile-based partitioning to ensure
balanced predicates, or use raised-cosine fuzzy sets with custom labels
to create meaningful linguistic terms like “very_low”, “low”, “medium”,
“high”, and “very_high”. These preparation choices significantly impact
the interpretability and usefulness of patterns discovered in subsequent
analyses.</p>
</div>
</div>
<div id="pre-defined-patterns" class="section level1">
<h1>Pre-defined Patterns</h1>
<p>The package <code>nuggets</code> provides a set of functions for
discovering some of the best-known pattern types. These functions can
process Boolean data, fuzzy data, or both. Each function returns a
tibble, where every row represents one detected pattern.</p>
<blockquote>
<p><strong>Note:</strong> This section assumes that the data have
already been <strong>preprocessed</strong> — i.e., transformed into a
binarized or fuzzified form. See the previous section <a href="#data-preparation">Data Preparation</a> for details on how to
prepare your dataset (for example, <code>crisp_mtcars</code> and
<code>fuzzy_mtcars</code>).</p>
</blockquote>
<p>For more advanced workflows — such as defining custom pattern types
or computing user-defined measures — see the section <a href="#custom-patterns">Custom Patterns</a>.</p>
<div id="search-for-association-rules" class="section level3">
<h3>Search for Association Rules</h3>
<p><strong>Association rules</strong> identify conditions
(<em>antecedents</em>) under which a specific feature
(<em>consequent</em>) is present very often.</p>
<p><span class="math display">\[
A \Rightarrow C
\]</span></p>
<p>If condition <code>A</code> is satisfied, then the feature
<code>C</code> tends to be present.</p>
<p>For example,<br />
<code>university_edu &amp; middle_age &amp; IT_industry =&gt; high_income</code><br />
can be read as:<br />
<em>People in middle age with university education working in IT
industry are very likely to have a high income.</em></p>
<p>In practice, the antecedent <code>A</code> is a set of predicates,
and the consequent <code>C</code> is usually a single predicate.</p>
<p>For a set of predicates <span class="math inline">\(I\)</span>, let
<span class="math inline">\(\text{supp}(I)\)</span> denote the
<em>support</em> — the relative frequency (for logical data) or the mean
truth degree (for fuzzy data) of rows satisfying all predicates in <span class="math inline">\(I\)</span>. Using this notation:</p>
<ul>
<li><strong>Length</strong> — number of predicates in the
antecedent.<br />
</li>
<li><strong>Coverage</strong> — <span class="math inline">\(\text{supp}(A)\)</span>.<br />
</li>
<li><strong>Consequent support</strong> — <span class="math inline">\(\text{supp}(\{c\})\)</span>.<br />
</li>
<li><strong>Support</strong> — <span class="math inline">\(\text{supp}(A
\cup \{c\})\)</span>.<br />
</li>
<li><strong>Confidence</strong> — <span class="math inline">\(\text{supp}(A \cup \{c\}) /
\text{supp}(A)\)</span>.</li>
</ul>
<p>Optional additional measures (<code>&quot;lift&quot;</code>,
<code>&quot;conviction&quot;</code>, <code>&quot;added_value&quot;</code>) can be computed
using the <code>measures</code> argument.</p>
<p>Before searching for rules, it is recommended to create a <em>vector
of disjoints</em>, which specifies predicates that must not appear
together in the same condition. This vector should have the same length
as the number of dataset columns.</p>
<p>For example, columns representing <code>gear=3</code> and
<code>gear=4</code> are mutually exclusive, so their shared group label
in <code>disj</code> prevents meaningless conditions like
<code>gear=3 &amp; gear=4</code>. You can conveniently generate this
vector with <code>var_names()</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>disj <span class="ot">&lt;-</span> <span class="fu">var_names</span>(<span class="fu">colnames</span>(fuzzy_mtcars))</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">print</span>(disj)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;cyl&quot;  &quot;cyl&quot;  &quot;cyl&quot;  &quot;vs&quot;   &quot;vs&quot;   &quot;am&quot;   &quot;am&quot;   &quot;gear&quot; &quot;gear&quot; &quot;gear&quot;</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co">#&gt; [11] &quot;mpg&quot;  &quot;mpg&quot;  &quot;mpg&quot;  &quot;disp&quot; &quot;disp&quot; &quot;disp&quot; &quot;hp&quot;   &quot;hp&quot;   &quot;hp&quot;   &quot;drat&quot;</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="co">#&gt; [21] &quot;drat&quot; &quot;drat&quot; &quot;wt&quot;   &quot;wt&quot;   &quot;wt&quot;   &quot;qsec&quot; &quot;qsec&quot; &quot;qsec&quot; &quot;carb&quot; &quot;carb&quot;</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="co">#&gt; [31] &quot;carb&quot;</span></span></code></pre></div>
<p>The <code>dig_associations()</code> function searches for association
rules. Its main arguments are:</p>
<ul>
<li><code>x</code>: the data matrix or data frame (logical or
numeric);</li>
<li><code>antecedent</code>, <code>consequent</code>: tidyselect
expressions selecting columns for each side of the rule;</li>
<li><code>disjoint</code>: a vector defining mutually exclusive
predicates;</li>
<li>rule filtering thresholds such as <code>min_support</code>,
<code>min_confidence</code>, <code>min_coverage</code>, and limits like
<code>min_length</code>, <code>max_length</code>;</li>
<li>optional parameters such as <code>measures</code>,
<code>t_norm</code>, and <code>contingency_table</code>.</li>
</ul>
<p>In the following example, we search for fuzzy association rules in
the dataset <code>fuzzy_mtcars</code>, such that: - any column except
those starting with <code>&quot;am&quot;</code> may appear in the antecedent; -
columns starting with <code>&quot;am&quot;</code> may appear in the consequent; -
minimum support is <code>0.02</code>; - minimum confidence is
<code>0.8</code>; - additional quality measures <code>&quot;lift&quot;</code> and
<code>&quot;conviction&quot;</code> are computed.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">dig_associations</span>(fuzzy_mtcars,</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>                           <span class="at">antecedent =</span> <span class="sc">!</span><span class="fu">starts_with</span>(<span class="st">&quot;am&quot;</span>),</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>                           <span class="at">consequent =</span> <span class="fu">starts_with</span>(<span class="st">&quot;am&quot;</span>),</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>                           <span class="at">disjoint =</span> disj,</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>                           <span class="at">min_support =</span> <span class="fl">0.02</span>,</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>                           <span class="at">min_confidence =</span> <span class="fl">0.8</span>,</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>                           <span class="at">measures =</span> <span class="fu">c</span>(<span class="st">&quot;lift&quot;</span>, <span class="st">&quot;conviction&quot;</span>),</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>                           <span class="at">contingency_table =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>The result is a tibble containing the discovered rules and their
quality metrics. You can arrange them, for example, by decreasing
support:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">arrange</span>(result, <span class="fu">desc</span>(support))</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">print</span>(result)</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="co">#&gt; # A tibble: 526 × 14</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="co">#&gt;    antecedent                     consequent support confidence coverage</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                          &lt;chr&gt;        &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="co">#&gt;  1 {gear=3}                       {am=0}       0.469      1        0.469</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="co">#&gt;  2 {gear=3,vs=0}                  {am=0}       0.375      1        0.375</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="co">#&gt;  3 {cyl=eight,gear=3,vs=0}        {am=0}       0.375      1        0.375</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="co">#&gt;  4 {cyl=eight,vs=0}               {am=0}       0.375      0.857    0.438</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="co">#&gt;  5 {cyl=eight,gear=3}             {am=0}       0.375      1        0.375</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="co">#&gt;  6 {cyl=eight}                    {am=0}       0.375      0.857    0.438</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="co">#&gt;  7 {mpg=(-Inf;15;20)}             {am=0}       0.327      0.847    0.387</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="co">#&gt;  8 {drat=(-Inf;2.76;3.84)}        {am=0}       0.311      0.948    0.328</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="co">#&gt;  9 {gear=3,mpg=(-Inf;15;20)}      {am=0}       0.309      1        0.309</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="co">#&gt; 10 {drat=(-Inf;2.76;3.84),gear=3} {am=0}       0.307      1        0.307</span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="co">#&gt;    conseq_support count antecedent_length    pp    pn    np    nn  lift</span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a><span class="co">#&gt;             &lt;dbl&gt; &lt;dbl&gt;             &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a><span class="co">#&gt;  1          0.594 15                    1 15    0      4     13    1.68</span></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a><span class="co">#&gt;  2          0.594 12                    2 12    0      7     13    1.68</span></span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a><span class="co">#&gt;  3          0.594 12                    3 12    0      7     13    1.68</span></span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a><span class="co">#&gt;  4          0.594 12                    2 12    2      7     11    1.44</span></span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a><span class="co">#&gt;  5          0.594 12                    2 12    0      7     13    1.68</span></span>
<span id="cb5-23"><a href="#cb5-23" tabindex="-1"></a><span class="co">#&gt;  6          0.594 12                    1 12    2      7     11    1.44</span></span>
<span id="cb5-24"><a href="#cb5-24" tabindex="-1"></a><span class="co">#&gt;  7          0.594 10.5                  1 10.5  1.90   8.52  11.1  1.43</span></span>
<span id="cb5-25"><a href="#cb5-25" tabindex="-1"></a><span class="co">#&gt;  8          0.594  9.96                 1  9.96 0.546  9.04  12.5  1.60</span></span>
<span id="cb5-26"><a href="#cb5-26" tabindex="-1"></a><span class="co">#&gt;  9          0.594  9.88                 2  9.88 0      9.12  13.0  1.68</span></span>
<span id="cb5-27"><a href="#cb5-27" tabindex="-1"></a><span class="co">#&gt; 10          0.594  9.82                 2  9.82 0      9.18  13    1.68</span></span>
<span id="cb5-28"><a href="#cb5-28" tabindex="-1"></a><span class="co">#&gt;    conviction</span></span>
<span id="cb5-29"><a href="#cb5-29" tabindex="-1"></a><span class="co">#&gt;         &lt;dbl&gt;</span></span>
<span id="cb5-30"><a href="#cb5-30" tabindex="-1"></a><span class="co">#&gt;  1     Inf   </span></span>
<span id="cb5-31"><a href="#cb5-31" tabindex="-1"></a><span class="co">#&gt;  2     Inf   </span></span>
<span id="cb5-32"><a href="#cb5-32" tabindex="-1"></a><span class="co">#&gt;  3     Inf   </span></span>
<span id="cb5-33"><a href="#cb5-33" tabindex="-1"></a><span class="co">#&gt;  4       2.84</span></span>
<span id="cb5-34"><a href="#cb5-34" tabindex="-1"></a><span class="co">#&gt;  5     Inf   </span></span>
<span id="cb5-35"><a href="#cb5-35" tabindex="-1"></a><span class="co">#&gt;  6       2.84</span></span>
<span id="cb5-36"><a href="#cb5-36" tabindex="-1"></a><span class="co">#&gt;  7       2.65</span></span>
<span id="cb5-37"><a href="#cb5-37" tabindex="-1"></a><span class="co">#&gt;  8       7.82</span></span>
<span id="cb5-38"><a href="#cb5-38" tabindex="-1"></a><span class="co">#&gt;  9     Inf   </span></span>
<span id="cb5-39"><a href="#cb5-39" tabindex="-1"></a><span class="co">#&gt; 10     Inf   </span></span>
<span id="cb5-40"><a href="#cb5-40" tabindex="-1"></a><span class="co">#&gt; # ℹ 516 more rows</span></span></code></pre></div>
<p>This example illustrates the typical workflow for mining association
rules with <code>nuggets</code>. The same structure and arguments apply
when analyzing either fuzzy or Boolean datasets.</p>
</div>
<div id="conditional-correlations" class="section level2">
<h2>Conditional Correlations</h2>
<p>TBD (<code>dig_correlations</code>)</p>
</div>
<div id="contrast-patterns" class="section level2">
<h2>Contrast Patterns</h2>
<p>TBD (<code>dig_contrasts</code>)</p>
</div>
</div>
<div id="post-processing-and-visualization" class="section level1">
<h1>Post-processing and Visualization</h1>
<p>TBD</p>
</div>
<div id="custom-patterns" class="section level1">
<h1>Custom Patterns</h1>
<p>The <code>nuggets</code> package allows to execute a user-defined
callback function on each generated frequent condition. That way a
custom type of patterns may be searched. The following example
replicates the search for associations rules with the custom callback
function. For that, a dataset has to be dichotomized and the disjoint
vector created as in the <strong>Data Preparation</strong> section
above:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co">#head(fuzzyCO2)</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="co">#print(disj)</span></span></code></pre></div>
<p>As we want to search for associations rules with some minimum support
and confidence, we define the variables to hold that thresholds. We also
need to define a callback function that will be called for each found
frequent condition. Its purpose is to generate the rules with the
obtained condition as an antecedent:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>min_support <span class="ot">&lt;-</span> <span class="fl">0.02</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>min_confidence <span class="ot">&lt;-</span> <span class="fl">0.8</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>(condition, support, foci_supports) {</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>    conf <span class="ot">&lt;-</span> foci_supports <span class="sc">/</span> support</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>    sel <span class="ot">&lt;-</span> <span class="sc">!</span><span class="fu">is.na</span>(conf) <span class="sc">&amp;</span> conf <span class="sc">&gt;=</span> min_confidence <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(foci_supports) <span class="sc">&amp;</span> foci_supports <span class="sc">&gt;=</span> min_support</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>    conf <span class="ot">&lt;-</span> conf[sel]</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>    supp <span class="ot">&lt;-</span> foci_supports[sel]</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>    </span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>    <span class="fu">lapply</span>(<span class="fu">seq_along</span>(conf), <span class="cf">function</span>(i) { </span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">antecedent =</span> <span class="fu">format_condition</span>(<span class="fu">names</span>(condition)),</span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>           <span class="at">consequent =</span> <span class="fu">format_condition</span>(<span class="fu">names</span>(conf)[[i]]),</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>           <span class="at">support =</span> supp[[i]],</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>           <span class="at">confidence =</span> conf[[i]])</span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>    })</span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a>}</span></code></pre></div>
<p>The callback function <code>f()</code> defines three arguments:
<code>condition</code>, <code>support</code> and
<code>foci_supports</code>. The names of the arguments are not random.
Based on the argument names of the callback function, the searching
algorithm provides information to the function. Here
<code>condition</code> is a vector of indices representing the
conjunction of predicates in a condition. By the predicate we mean the
column in the source dataset. The <code>support</code> argument gets the
relative frequency of the condition in the dataset.
<code>foci_supports</code> is a vector of supports of special
predicates, which we call “foci” (plural of “focus”), within the rows
satisfying the condition. For associations rules, foci are potential
rule consequents.</p>
<p>Now we can run the digging for rules:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co">#result &lt;- dig(fuzzyCO2,</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>              <span class="co">#f = f,</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>              <span class="co">#condition = !starts_with(&quot;Treatment&quot;),</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>              <span class="co">#focus = starts_with(&quot;Treatment&quot;),</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>              <span class="co">#disjoint = disj,</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>              <span class="co">#min_length = 1,</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>              <span class="co">#min_support = min_support)</span></span></code></pre></div>
<p>As we return a list of lists in the callback function, we have to
flatten the first level of lists in the result and binding it into a
data frame:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co">#result &lt;- result |&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>  <span class="co">#unlist(recursive = FALSE) |&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>  <span class="co">#lapply(as_tibble) |&gt;</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>  <span class="co">#do.call(rbind, args = _) |&gt;</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>  <span class="co">#arrange(desc(support))</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="co">#print(result)</span></span></code></pre></div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
